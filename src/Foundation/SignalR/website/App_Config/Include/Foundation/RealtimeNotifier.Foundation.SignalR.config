<?xml version="1.0"?>
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/" xmlns:role="http://www.sitecore.net/xmlconfig/role/">
    <sitecore>
        <pipelines>
            <owin.initialize role:require="Standalone or ContentManagement">
                <processor type="RealtimeNotifier.Foundation.SignalR.Pipelines.OwinInitialize.InitializeSignalR, RealtimeNotifier.Foundation.SignalR" patch:after="processor[@type='Sitecore.Owin.Pipelines.Initialize.SetLoggerFactory, Sitecore.Owin']" resolve="true" />
            </owin.initialize>
            <renderContentEditor role:require="Standalone or ContentManagement">
                <processor patch:before="*[1]" type="RealtimeNotifier.Foundation.SignalR.Pipelines.RenderContentEditor.RegisterSignalRScripts, RealtimeNotifier.Foundation.SignalR">
                    <scripts hint="list:addScriptResource">
                        <resource>/scripts/jquery.signalr-2.4.1.min.js</resource>
                        <resource>/signalr/hubs</resource>
                        <resource>/scripts/connect-signalr.js</resource>
                    </scripts>
                </processor>
            </renderContentEditor>
        </pipelines>
        <events>
            <event name="item:saved">
                <handler type="RealtimeNotifier.Foundation.SignalR.Events.ItemSavedNotification, RealtimeNotifier.Foundation.SignalR" method="OnItemSaved" resolve="true" />
            </event>
        </events>
        <settings>
            <setting name="Owin.AssertStageMarkers" value="false" />
        </settings>
    </sitecore>
</configuration>
